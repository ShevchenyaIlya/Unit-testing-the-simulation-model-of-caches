        -:    0:Source:/home/shevchenya/CLionProjects/CourseWorkCache/google_tests/general_cache_tests.cpp
        -:    0:Graph:/home/shevchenya/CLionProjects/CourseWorkCache/cmake-build-debug/google_tests/CMakeFiles/google_tests_run.dir/general_cache_tests.cpp.gcno
        -:    0:Data:/home/shevchenya/CLionProjects/CourseWorkCache/cmake-build-debug/google_tests/CMakeFiles/google_tests_run.dir/general_cache_tests.cpp.gcda
        -:    0:Runs:1
        -:    0:Programs:1
        -:    1://
        -:    2:// Created by shevchenya on 17/11/2020.
        -:    3://
        -:    4:
        -:    5:#include "gtest/gtest.h"
        -:    6:#include "../src/Memory.h"
        -:    7:
        8:    8:TEST(GeneralCacheTests, emptyCodeDataRequestResponse) {
        1:    8-block  0
        1:    8-block  1
        1:    8-block  2
        1:    8-block  3
        1:    8-block  4
    %%%%%:    8-block  5
    %%%%%:    8-block  6
    %%%%%:    8-block  7
    %%%%%:    8-block  8
    %%%%%:    8-block  9
        1:    8-block 10
        1:    8-block 11
        1:    8-block 12
        1:    8-block 13
        1:    8-block 14
        2:    9:    MemoryStorage mem;
        1:    9-block  0
        1:    9-block  1
        1:    9-block  2
    $$$$$:    9-block  3
        1:    9-block  4
    %%%%%:    9-block  5
        1:   10:    mem.LoadElf("/home/shevchenya/CLionProjects/CourseWorkCache/programs/build/assembly/bin/simple.riscv");
        1:   10-block  0
        1:   10-block  1
        1:   10-block  2
    %%%%%:   10-block  3
    %%%%%:   10-block  4
    %%%%%:   10-block  5
    %%%%%:   10-block  6
        2:   11:    UncachedMem uncachedMem = UncachedMem (mem);
        1:   11-block  0
    $$$$$:   11-block  1
        1:   11-block  2
        1:   11-block  3
    %%%%%:   11-block  4
        2:   12:    std::unique_ptr<CachedMem> memModelPtr( new CachedMem(uncachedMem));
        1:   12-block  0
        1:   12-block  1
        1:   12-block  2
    $$$$$:   12-block  3
        1:   12-block  4
        1:   12-block  5
    %%%%%:   12-block  6
    %%%%%:   12-block  7
        2:   13:    CachedMem cache = *memModelPtr;
        1:   13-block  0
    $$$$$:   13-block  1
        1:   13-block  2
        1:   13-block  3
    %%%%%:   13-block  4
        -:   14:
        -:   15:    //Code cache first request
        1:   16:    cache.Request(512);
        1:   16-block  0
        1:   17:    ASSERT_TRUE(cache.isCacheMiss());
        1:   17-block  0
    $$$$$:   17-block  1
    $$$$$:   17-block  2
    $$$$$:   17-block  3
    $$$$$:   17-block  4
    $$$$$:   17-block  5
        1:   17-block  6
        1:   17-block  7
        1:   17-block  8
    %%%%%:   17-block  9
    %%%%%:   17-block 10
    %%%%%:   17-block 11
    %%%%%:   17-block 12
    %%%%%:   17-block 13
    %%%%%:   17-block 14
    %%%%%:   17-block 15
    %%%%%:   17-block 16
    %%%%%:   17-block 17
        1:   18:    ASSERT_EQ(cache.getWaitCycles(), cache.getFailLatency());
        1:   18-block  0
    $$$$$:   18-block  1
        1:   18-block  2
    $$$$$:   18-block  3
    $$$$$:   18-block  4
    $$$$$:   18-block  5
    $$$$$:   18-block  6
        1:   18-block  7
        1:   18-block  8
        1:   18-block  9
    %%%%%:   18-block 10
    %%%%%:   18-block 11
    %%%%%:   18-block 12
    %%%%%:   18-block 13
    %%%%%:   18-block 14
    %%%%%:   18-block 15
    %%%%%:   18-block 16
    %%%%%:   18-block 17
    %%%%%:   18-block 18
    %%%%%:   18-block 19
        1:   19:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(512));
        1:   19-block  0
    $$$$$:   19-block  1
        1:   19-block  2
    $$$$$:   19-block  3
    $$$$$:   19-block  4
    $$$$$:   19-block  5
    $$$$$:   19-block  6
        1:   19-block  7
        1:   19-block  8
        1:   19-block  9
    %%%%%:   19-block 10
    %%%%%:   19-block 11
    %%%%%:   19-block 12
    %%%%%:   19-block 13
    %%%%%:   19-block 14
    %%%%%:   19-block 15
    %%%%%:   19-block 16
    %%%%%:   19-block 17
    %%%%%:   19-block 18
    %%%%%:   19-block 19
        1:   20:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(512));
        1:   20-block  0
    $$$$$:   20-block  1
        1:   20-block  2
    $$$$$:   20-block  3
    $$$$$:   20-block  4
    $$$$$:   20-block  5
    $$$$$:   20-block  6
        1:   20-block  7
        1:   20-block  8
        1:   20-block  9
    %%%%%:   20-block 10
    %%%%%:   20-block 11
    %%%%%:   20-block 12
    %%%%%:   20-block 13
    %%%%%:   20-block 14
    %%%%%:   20-block 15
    %%%%%:   20-block 16
    %%%%%:   20-block 17
    %%%%%:   20-block 18
    %%%%%:   20-block 19
        -:   21:
        -:   22:    //Code cache response
        1:   23:    cache.setWaitCycles(0);
        1:   23-block  0
        1:   24:    Word position = 512 % (codeCacheBytes / blockCount) / lineSizeBytes;
        1:   25:    ASSERT_EQ(cache.Response(20), 19);
    $$$$$:   25-block  0
        1:   25-block  1
        1:   25-block  2
    $$$$$:   25-block  3
    $$$$$:   25-block  4
    $$$$$:   25-block  5
    $$$$$:   25-block  6
        1:   25-block  7
        1:   25-block  8
        1:   25-block  9
    %%%%%:   25-block 10
    %%%%%:   25-block 11
    %%%%%:   25-block 12
    %%%%%:   25-block 13
    %%%%%:   25-block 14
    %%%%%:   25-block 15
    %%%%%:   25-block 16
    %%%%%:   25-block 17
    %%%%%:   25-block 18
    %%%%%:   25-block 19
        1:   26:    ASSERT_EQ(cache.getCodeMemory()[0][position].lastUsage, 1);
        1:   26-block  0
    $$$$$:   26-block  1
        1:   26-block  2
    $$$$$:   26-block  3
    $$$$$:   26-block  4
    $$$$$:   26-block  5
    $$$$$:   26-block  6
        1:   26-block  7
        1:   26-block  8
        1:   26-block  9
    %%%%%:   26-block 10
    %%%%%:   26-block 11
    %%%%%:   26-block 12
    %%%%%:   26-block 13
    %%%%%:   26-block 14
    %%%%%:   26-block 15
    %%%%%:   26-block 16
    %%%%%:   26-block 17
        1:   27:    ASSERT_EQ(cache.getCodeMemory()[0][position].address, ToLineAddr(512));
        1:   27-block  0
    $$$$$:   27-block  1
        1:   27-block  2
    $$$$$:   27-block  3
    $$$$$:   27-block  4
    $$$$$:   27-block  5
    $$$$$:   27-block  6
        1:   27-block  7
        1:   27-block  8
        1:   27-block  9
    %%%%%:   27-block 10
    %%%%%:   27-block 11
    %%%%%:   27-block 12
    %%%%%:   27-block 13
    %%%%%:   27-block 14
    %%%%%:   27-block 15
    %%%%%:   27-block 16
        1:   28:    ASSERT_TRUE(cache.getCodeMemory()[0][position].validityBit);
        1:   28-block  0
    $$$$$:   28-block  1
    $$$$$:   28-block  2
    $$$$$:   28-block  3
    $$$$$:   28-block  4
    $$$$$:   28-block  5
    $$$$$:   28-block  6
        1:   28-block  7
        1:   28-block  8
        1:   28-block  9
    %%%%%:   28-block 10
    %%%%%:   28-block 11
    %%%%%:   28-block 12
    %%%%%:   28-block 13
    %%%%%:   28-block 14
    %%%%%:   28-block 15
    %%%%%:   28-block 16
    %%%%%:   28-block 17
        -:   29:
        -:   30:    //Data cache first request
        1:   31:    cache.Request(1024, IType::St);
        1:   31-block  0
    $$$$$:   31-block  1
        1:   32:    ASSERT_TRUE(cache.isCacheMiss());
        1:   32-block  0
    $$$$$:   32-block  1
    $$$$$:   32-block  2
    $$$$$:   32-block  3
    $$$$$:   32-block  4
    $$$$$:   32-block  5
        1:   32-block  6
        1:   32-block  7
        1:   32-block  8
    %%%%%:   32-block  9
    %%%%%:   32-block 10
    %%%%%:   32-block 11
    %%%%%:   32-block 12
    %%%%%:   32-block 13
    %%%%%:   32-block 14
    %%%%%:   32-block 15
    %%%%%:   32-block 16
    %%%%%:   32-block 17
        1:   33:    ASSERT_EQ(cache.getWaitCycles(), cache.getFailLatency());
        1:   33-block  0
    $$$$$:   33-block  1
        1:   33-block  2
    $$$$$:   33-block  3
    $$$$$:   33-block  4
    $$$$$:   33-block  5
    $$$$$:   33-block  6
        1:   33-block  7
        1:   33-block  8
        1:   33-block  9
    %%%%%:   33-block 10
    %%%%%:   33-block 11
    %%%%%:   33-block 12
    %%%%%:   33-block 13
    %%%%%:   33-block 14
    %%%%%:   33-block 15
    %%%%%:   33-block 16
    %%%%%:   33-block 17
    %%%%%:   33-block 18
    %%%%%:   33-block 19
        1:   34:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(1024));
        1:   34-block  0
    $$$$$:   34-block  1
        1:   34-block  2
    $$$$$:   34-block  3
    $$$$$:   34-block  4
    $$$$$:   34-block  5
    $$$$$:   34-block  6
        1:   34-block  7
        1:   34-block  8
        1:   34-block  9
    %%%%%:   34-block 10
    %%%%%:   34-block 11
    %%%%%:   34-block 12
    %%%%%:   34-block 13
    %%%%%:   34-block 14
    %%%%%:   34-block 15
    %%%%%:   34-block 16
    %%%%%:   34-block 17
    %%%%%:   34-block 18
    %%%%%:   34-block 19
        1:   35:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(1024));
        1:   35-block  0
    $$$$$:   35-block  1
        1:   35-block  2
    $$$$$:   35-block  3
    $$$$$:   35-block  4
    $$$$$:   35-block  5
    $$$$$:   35-block  6
        1:   35-block  7
        1:   35-block  8
        1:   35-block  9
    %%%%%:   35-block 10
    %%%%%:   35-block 11
    %%%%%:   35-block 12
    %%%%%:   35-block 13
    %%%%%:   35-block 14
    %%%%%:   35-block 15
    %%%%%:   35-block 16
    %%%%%:   35-block 17
    %%%%%:   35-block 18
        1:   36:    cache.setWaitCycles(0);
        1:   36-block  0
        -:   37:
        -:   38:    //Data cache response
        1:   39:    Word responseData = 1024;
        1:   40:    ASSERT_TRUE(cache.Response(1024, responseData, IType::St, 20));
    $$$$$:   40-block  0
        1:   40-block  1
    $$$$$:   40-block  2
    $$$$$:   40-block  3
    $$$$$:   40-block  4
    $$$$$:   40-block  5
    $$$$$:   40-block  6
        1:   40-block  7
        1:   40-block  8
        1:   40-block  9
    %%%%%:   40-block 10
    %%%%%:   40-block 11
    %%%%%:   40-block 12
    %%%%%:   40-block 13
    %%%%%:   40-block 14
    %%%%%:   40-block 15
    %%%%%:   40-block 16
    %%%%%:   40-block 17
        1:   41:    ASSERT_FALSE(cache.getDataMemory()[0][1024 % (dataCacheBytes / blockCount) / lineSizeBytes].validityBit);
        1:   41-block  0
    $$$$$:   41-block  1
    $$$$$:   41-block  2
    $$$$$:   41-block  3
    $$$$$:   41-block  4
    $$$$$:   41-block  5
    $$$$$:   41-block  6
        1:   41-block  7
        1:   41-block  8
        1:   41-block  9
    %%%%%:   41-block 10
    %%%%%:   41-block 11
    %%%%%:   41-block 12
    %%%%%:   41-block 13
    %%%%%:   41-block 14
    %%%%%:   41-block 15
    %%%%%:   41-block 16
    %%%%%:   41-block 17
    %%%%%:   41-block 18
        1:   42:    ASSERT_EQ(cache.getDataMemory()[0][1024 % (dataCacheBytes / blockCount) / lineSizeBytes].lastUsage, 1);
        1:   42-block  0
    $$$$$:   42-block  1
        1:   42-block  2
    $$$$$:   42-block  3
    $$$$$:   42-block  4
    $$$$$:   42-block  5
    $$$$$:   42-block  6
        1:   42-block  7
        1:   42-block  8
        1:   42-block  9
    %%%%%:   42-block 10
    %%%%%:   42-block 11
    %%%%%:   42-block 12
    %%%%%:   42-block 13
    %%%%%:   42-block 14
    %%%%%:   42-block 15
    %%%%%:   42-block 16
    %%%%%:   42-block 17
        1:   43:    ASSERT_EQ(cache.getDataMemory()[0][1024 % (dataCacheBytes / blockCount) / lineSizeBytes].dataLine[ToLineOffset(1024)], 1024);
        1:   43-block  0
    $$$$$:   43-block  1
        1:   43-block  2
    $$$$$:   43-block  3
    $$$$$:   43-block  4
    $$$$$:   43-block  5
    $$$$$:   43-block  6
        1:   43-block  7
        1:   43-block  8
        1:   43-block  9
    %%%%%:   43-block 10
    %%%%%:   43-block 11
    %%%%%:   43-block 12
    %%%%%:   43-block 13
    %%%%%:   43-block 14
    %%%%%:   43-block 15
    %%%%%:   43-block 16
        -:   44:
        -:   45:    //Line in cache. Second code request/response
        1:   46:    cache.Request(516);
        1:   46-block  0
    $$$$$:   46-block  1
        1:   47:    ASSERT_FALSE(cache.isCacheMiss());
        1:   47-block  0
    $$$$$:   47-block  1
    $$$$$:   47-block  2
    $$$$$:   47-block  3
    $$$$$:   47-block  4
    $$$$$:   47-block  5
        1:   47-block  6
        1:   47-block  7
        1:   47-block  8
    %%%%%:   47-block  9
    %%%%%:   47-block 10
    %%%%%:   47-block 11
    %%%%%:   47-block 12
    %%%%%:   47-block 13
    %%%%%:   47-block 14
    %%%%%:   47-block 15
    %%%%%:   47-block 16
    %%%%%:   47-block 17
        1:   48:    ASSERT_EQ(cache.getWaitCycles(), cache.getCodeLatency());
        1:   48-block  0
    $$$$$:   48-block  1
        1:   48-block  2
    $$$$$:   48-block  3
    $$$$$:   48-block  4
    $$$$$:   48-block  5
    $$$$$:   48-block  6
        1:   48-block  7
        1:   48-block  8
        1:   48-block  9
    %%%%%:   48-block 10
    %%%%%:   48-block 11
    %%%%%:   48-block 12
    %%%%%:   48-block 13
    %%%%%:   48-block 14
    %%%%%:   48-block 15
    %%%%%:   48-block 16
    %%%%%:   48-block 17
    %%%%%:   48-block 18
    %%%%%:   48-block 19
        1:   49:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(516));
        1:   49-block  0
    $$$$$:   49-block  1
        1:   49-block  2
    $$$$$:   49-block  3
    $$$$$:   49-block  4
    $$$$$:   49-block  5
    $$$$$:   49-block  6
        1:   49-block  7
        1:   49-block  8
        1:   49-block  9
    %%%%%:   49-block 10
    %%%%%:   49-block 11
    %%%%%:   49-block 12
    %%%%%:   49-block 13
    %%%%%:   49-block 14
    %%%%%:   49-block 15
    %%%%%:   49-block 16
    %%%%%:   49-block 17
    %%%%%:   49-block 18
    %%%%%:   49-block 19
        1:   50:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(516));
        1:   50-block  0
    $$$$$:   50-block  1
        1:   50-block  2
    $$$$$:   50-block  3
    $$$$$:   50-block  4
    $$$$$:   50-block  5
    $$$$$:   50-block  6
        1:   50-block  7
        1:   50-block  8
        1:   50-block  9
    %%%%%:   50-block 10
    %%%%%:   50-block 11
    %%%%%:   50-block 12
    %%%%%:   50-block 13
    %%%%%:   50-block 14
    %%%%%:   50-block 15
    %%%%%:   50-block 16
    %%%%%:   50-block 17
    %%%%%:   50-block 18
    %%%%%:   50-block 19
        -:   51:
        1:   52:    cache.setWaitCycles(0);
        1:   52-block  0
        1:   53:    position = 516 % (codeCacheBytes / blockCount) / lineSizeBytes;
        1:   54:    ASSERT_EQ(cache.Response(20), 19);
    $$$$$:   54-block  0
        1:   54-block  1
        1:   54-block  2
    $$$$$:   54-block  3
    $$$$$:   54-block  4
    $$$$$:   54-block  5
    $$$$$:   54-block  6
        1:   54-block  7
        1:   54-block  8
        1:   54-block  9
    %%%%%:   54-block 10
    %%%%%:   54-block 11
    %%%%%:   54-block 12
    %%%%%:   54-block 13
    %%%%%:   54-block 14
    %%%%%:   54-block 15
    %%%%%:   54-block 16
    %%%%%:   54-block 17
    %%%%%:   54-block 18
    %%%%%:   54-block 19
        1:   55:    ASSERT_EQ(cache.getCodeMemory()[0][position].lastUsage, 1);
        1:   55-block  0
    $$$$$:   55-block  1
        1:   55-block  2
    $$$$$:   55-block  3
    $$$$$:   55-block  4
    $$$$$:   55-block  5
    $$$$$:   55-block  6
        1:   55-block  7
        1:   55-block  8
        1:   55-block  9
    %%%%%:   55-block 10
    %%%%%:   55-block 11
    %%%%%:   55-block 12
    %%%%%:   55-block 13
    %%%%%:   55-block 14
    %%%%%:   55-block 15
    %%%%%:   55-block 16
    %%%%%:   55-block 17
        1:   56:    ASSERT_EQ(cache.getCodeMemory()[0][position].address, ToLineAddr(516));
        1:   56-block  0
    $$$$$:   56-block  1
        1:   56-block  2
    $$$$$:   56-block  3
    $$$$$:   56-block  4
    $$$$$:   56-block  5
    $$$$$:   56-block  6
        1:   56-block  7
        1:   56-block  8
        1:   56-block  9
    %%%%%:   56-block 10
    %%%%%:   56-block 11
    %%%%%:   56-block 12
    %%%%%:   56-block 13
    %%%%%:   56-block 14
    %%%%%:   56-block 15
    %%%%%:   56-block 16
        1:   57:    ASSERT_TRUE(cache.getCodeMemory()[0][position].validityBit);
        1:   57-block  0
    $$$$$:   57-block  1
    $$$$$:   57-block  2
    $$$$$:   57-block  3
    $$$$$:   57-block  4
    $$$$$:   57-block  5
    $$$$$:   57-block  6
        1:   57-block  7
        1:   57-block  8
        1:   57-block  9
    %%%%%:   57-block 10
    %%%%%:   57-block 11
    %%%%%:   57-block 12
    %%%%%:   57-block 13
    %%%%%:   57-block 14
    %%%%%:   57-block 15
    %%%%%:   57-block 16
    %%%%%:   57-block 17
        -:   58:
        -:   59:    //Line in cache. Second data request/response
        1:   60:    cache.Request(1028, IType::St);
        1:   60-block  0
    $$$$$:   60-block  1
        1:   61:    ASSERT_FALSE(cache.isCacheMiss());
        1:   61-block  0
    $$$$$:   61-block  1
    $$$$$:   61-block  2
    $$$$$:   61-block  3
    $$$$$:   61-block  4
    $$$$$:   61-block  5
        1:   61-block  6
        1:   61-block  7
        1:   61-block  8
    %%%%%:   61-block  9
    %%%%%:   61-block 10
    %%%%%:   61-block 11
    %%%%%:   61-block 12
    %%%%%:   61-block 13
    %%%%%:   61-block 14
    %%%%%:   61-block 15
    %%%%%:   61-block 16
    %%%%%:   61-block 17
        1:   62:    ASSERT_EQ(cache.getWaitCycles(), cache.getDataLatency());
        1:   62-block  0
    $$$$$:   62-block  1
        1:   62-block  2
    $$$$$:   62-block  3
    $$$$$:   62-block  4
    $$$$$:   62-block  5
    $$$$$:   62-block  6
        1:   62-block  7
        1:   62-block  8
        1:   62-block  9
    %%%%%:   62-block 10
    %%%%%:   62-block 11
    %%%%%:   62-block 12
    %%%%%:   62-block 13
    %%%%%:   62-block 14
    %%%%%:   62-block 15
    %%%%%:   62-block 16
    %%%%%:   62-block 17
    %%%%%:   62-block 18
    %%%%%:   62-block 19
        1:   63:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(1028));
        1:   63-block  0
    $$$$$:   63-block  1
        1:   63-block  2
    $$$$$:   63-block  3
    $$$$$:   63-block  4
    $$$$$:   63-block  5
    $$$$$:   63-block  6
        1:   63-block  7
        1:   63-block  8
        1:   63-block  9
    %%%%%:   63-block 10
    %%%%%:   63-block 11
    %%%%%:   63-block 12
    %%%%%:   63-block 13
    %%%%%:   63-block 14
    %%%%%:   63-block 15
    %%%%%:   63-block 16
    %%%%%:   63-block 17
    %%%%%:   63-block 18
    %%%%%:   63-block 19
        1:   64:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(1028));
        1:   64-block  0
    $$$$$:   64-block  1
        1:   64-block  2
    $$$$$:   64-block  3
    $$$$$:   64-block  4
    $$$$$:   64-block  5
    $$$$$:   64-block  6
        1:   64-block  7
        1:   64-block  8
        1:   64-block  9
    %%%%%:   64-block 10
    %%%%%:   64-block 11
    %%%%%:   64-block 12
    %%%%%:   64-block 13
    %%%%%:   64-block 14
    %%%%%:   64-block 15
    %%%%%:   64-block 16
    %%%%%:   64-block 17
    %%%%%:   64-block 18
        -:   65:
        1:   66:    cache.setWaitCycles(0);
        1:   66-block  0
        1:   67:    responseData = 1028;
        1:   68:    ASSERT_TRUE(cache.Response(1028, responseData, IType::St, 20));
    $$$$$:   68-block  0
        1:   68-block  1
    $$$$$:   68-block  2
    $$$$$:   68-block  3
    $$$$$:   68-block  4
    $$$$$:   68-block  5
    $$$$$:   68-block  6
        1:   68-block  7
        1:   68-block  8
        1:   68-block  9
    %%%%%:   68-block 10
    %%%%%:   68-block 11
    %%%%%:   68-block 12
    %%%%%:   68-block 13
    %%%%%:   68-block 14
    %%%%%:   68-block 15
    %%%%%:   68-block 16
    %%%%%:   68-block 17
        1:   69:    ASSERT_FALSE(cache.getDataMemory()[0][1028 % (dataCacheBytes / blockCount) / lineSizeBytes].validityBit);
        1:   69-block  0
    $$$$$:   69-block  1
    $$$$$:   69-block  2
    $$$$$:   69-block  3
    $$$$$:   69-block  4
    $$$$$:   69-block  5
    $$$$$:   69-block  6
        1:   69-block  7
        1:   69-block  8
        1:   69-block  9
    %%%%%:   69-block 10
    %%%%%:   69-block 11
    %%%%%:   69-block 12
    %%%%%:   69-block 13
    %%%%%:   69-block 14
    %%%%%:   69-block 15
    %%%%%:   69-block 16
    %%%%%:   69-block 17
    %%%%%:   69-block 18
        1:   70:    ASSERT_EQ(cache.getDataMemory()[0][1028 % (dataCacheBytes / blockCount) / lineSizeBytes].lastUsage, 1);
        1:   70-block  0
    $$$$$:   70-block  1
        1:   70-block  2
    $$$$$:   70-block  3
    $$$$$:   70-block  4
    $$$$$:   70-block  5
    $$$$$:   70-block  6
        1:   70-block  7
        1:   70-block  8
        1:   70-block  9
    %%%%%:   70-block 10
    %%%%%:   70-block 11
    %%%%%:   70-block 12
    %%%%%:   70-block 13
    %%%%%:   70-block 14
    %%%%%:   70-block 15
    %%%%%:   70-block 16
    %%%%%:   70-block 17
        1:   71:    ASSERT_EQ(cache.getDataMemory()[0][1028 % (dataCacheBytes / blockCount) / lineSizeBytes].dataLine[ToLineOffset(1028)], 1028);
        1:   71-block  0
    $$$$$:   71-block  1
        1:   71-block  2
    $$$$$:   71-block  3
    $$$$$:   71-block  4
    $$$$$:   71-block  5
    $$$$$:   71-block  6
        1:   71-block  7
        1:   71-block  8
        1:   71-block  9
    %%%%%:   71-block 10
    %%%%%:   71-block 11
    %%%%%:   71-block 12
    %%%%%:   71-block 13
    %%%%%:   71-block 14
    %%%%%:   71-block 15
    %%%%%:   71-block 16
        -:   72:
        -:   73:    //New line not in cache. Third code request/response
        1:   74:    cache.Request(640);
        1:   74-block  0
    $$$$$:   74-block  1
        1:   75:    ASSERT_TRUE(cache.isCacheMiss());
        1:   75-block  0
    $$$$$:   75-block  1
    $$$$$:   75-block  2
    $$$$$:   75-block  3
    $$$$$:   75-block  4
    $$$$$:   75-block  5
        1:   75-block  6
        1:   75-block  7
        1:   75-block  8
    %%%%%:   75-block  9
    %%%%%:   75-block 10
    %%%%%:   75-block 11
    %%%%%:   75-block 12
    %%%%%:   75-block 13
    %%%%%:   75-block 14
    %%%%%:   75-block 15
    %%%%%:   75-block 16
    %%%%%:   75-block 17
        1:   76:    ASSERT_EQ(cache.getWaitCycles(), cache.getFailLatency());
        1:   76-block  0
    $$$$$:   76-block  1
        1:   76-block  2
    $$$$$:   76-block  3
    $$$$$:   76-block  4
    $$$$$:   76-block  5
    $$$$$:   76-block  6
        1:   76-block  7
        1:   76-block  8
        1:   76-block  9
    %%%%%:   76-block 10
    %%%%%:   76-block 11
    %%%%%:   76-block 12
    %%%%%:   76-block 13
    %%%%%:   76-block 14
    %%%%%:   76-block 15
    %%%%%:   76-block 16
    %%%%%:   76-block 17
    %%%%%:   76-block 18
    %%%%%:   76-block 19
        1:   77:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(640));
        1:   77-block  0
    $$$$$:   77-block  1
        1:   77-block  2
    $$$$$:   77-block  3
    $$$$$:   77-block  4
    $$$$$:   77-block  5
    $$$$$:   77-block  6
        1:   77-block  7
        1:   77-block  8
        1:   77-block  9
    %%%%%:   77-block 10
    %%%%%:   77-block 11
    %%%%%:   77-block 12
    %%%%%:   77-block 13
    %%%%%:   77-block 14
    %%%%%:   77-block 15
    %%%%%:   77-block 16
    %%%%%:   77-block 17
    %%%%%:   77-block 18
    %%%%%:   77-block 19
        1:   78:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(640));
        1:   78-block  0
    $$$$$:   78-block  1
        1:   78-block  2
    $$$$$:   78-block  3
    $$$$$:   78-block  4
    $$$$$:   78-block  5
    $$$$$:   78-block  6
        1:   78-block  7
        1:   78-block  8
        1:   78-block  9
    %%%%%:   78-block 10
    %%%%%:   78-block 11
    %%%%%:   78-block 12
    %%%%%:   78-block 13
    %%%%%:   78-block 14
    %%%%%:   78-block 15
    %%%%%:   78-block 16
    %%%%%:   78-block 17
    %%%%%:   78-block 18
    %%%%%:   78-block 19
        -:   79:
        1:   80:    cache.setWaitCycles(0);
        1:   80-block  0
        1:   81:    position = 640 % (codeCacheBytes / blockCount) / lineSizeBytes;
        1:   82:    ASSERT_EQ(cache.Response(20), 19);
    $$$$$:   82-block  0
        1:   82-block  1
        1:   82-block  2
    $$$$$:   82-block  3
    $$$$$:   82-block  4
    $$$$$:   82-block  5
    $$$$$:   82-block  6
        1:   82-block  7
        1:   82-block  8
        1:   82-block  9
    %%%%%:   82-block 10
    %%%%%:   82-block 11
    %%%%%:   82-block 12
    %%%%%:   82-block 13
    %%%%%:   82-block 14
    %%%%%:   82-block 15
    %%%%%:   82-block 16
    %%%%%:   82-block 17
    %%%%%:   82-block 18
    %%%%%:   82-block 19
        1:   83:    ASSERT_EQ(cache.getCodeMemory()[0][position].lastUsage, 1);
        1:   83-block  0
    $$$$$:   83-block  1
        1:   83-block  2
    $$$$$:   83-block  3
    $$$$$:   83-block  4
    $$$$$:   83-block  5
    $$$$$:   83-block  6
        1:   83-block  7
        1:   83-block  8
        1:   83-block  9
    %%%%%:   83-block 10
    %%%%%:   83-block 11
    %%%%%:   83-block 12
    %%%%%:   83-block 13
    %%%%%:   83-block 14
    %%%%%:   83-block 15
    %%%%%:   83-block 16
    %%%%%:   83-block 17
        1:   84:    ASSERT_EQ(cache.getCodeMemory()[0][position].address, ToLineAddr(640));
        1:   84-block  0
    $$$$$:   84-block  1
        1:   84-block  2
    $$$$$:   84-block  3
    $$$$$:   84-block  4
    $$$$$:   84-block  5
    $$$$$:   84-block  6
        1:   84-block  7
        1:   84-block  8
        1:   84-block  9
    %%%%%:   84-block 10
    %%%%%:   84-block 11
    %%%%%:   84-block 12
    %%%%%:   84-block 13
    %%%%%:   84-block 14
    %%%%%:   84-block 15
    %%%%%:   84-block 16
        1:   85:    ASSERT_TRUE(cache.getCodeMemory()[0][position].validityBit);
        1:   85-block  0
    $$$$$:   85-block  1
    $$$$$:   85-block  2
    $$$$$:   85-block  3
    $$$$$:   85-block  4
    $$$$$:   85-block  5
    $$$$$:   85-block  6
        1:   85-block  7
        1:   85-block  8
        1:   85-block  9
    %%%%%:   85-block 10
    %%%%%:   85-block 11
    %%%%%:   85-block 12
    %%%%%:   85-block 13
    %%%%%:   85-block 14
    %%%%%:   85-block 15
    %%%%%:   85-block 16
    %%%%%:   85-block 17
        -:   86:
        -:   87:    //New line not in cache. Third data request/response
        1:   88:    cache.Request(1152, IType::St);
        1:   88-block  0
    $$$$$:   88-block  1
        1:   89:    ASSERT_TRUE(cache.isCacheMiss());
        1:   89-block  0
    $$$$$:   89-block  1
    $$$$$:   89-block  2
    $$$$$:   89-block  3
    $$$$$:   89-block  4
    $$$$$:   89-block  5
        1:   89-block  6
        1:   89-block  7
        1:   89-block  8
    %%%%%:   89-block  9
    %%%%%:   89-block 10
    %%%%%:   89-block 11
    %%%%%:   89-block 12
    %%%%%:   89-block 13
    %%%%%:   89-block 14
    %%%%%:   89-block 15
    %%%%%:   89-block 16
    %%%%%:   89-block 17
        1:   90:    ASSERT_EQ(cache.getWaitCycles(), cache.getFailLatency());
        1:   90-block  0
    $$$$$:   90-block  1
        1:   90-block  2
    $$$$$:   90-block  3
    $$$$$:   90-block  4
    $$$$$:   90-block  5
    $$$$$:   90-block  6
        1:   90-block  7
        1:   90-block  8
        1:   90-block  9
    %%%%%:   90-block 10
    %%%%%:   90-block 11
    %%%%%:   90-block 12
    %%%%%:   90-block 13
    %%%%%:   90-block 14
    %%%%%:   90-block 15
    %%%%%:   90-block 16
    %%%%%:   90-block 17
    %%%%%:   90-block 18
    %%%%%:   90-block 19
        1:   91:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(1152));
        1:   91-block  0
    $$$$$:   91-block  1
        1:   91-block  2
    $$$$$:   91-block  3
    $$$$$:   91-block  4
    $$$$$:   91-block  5
    $$$$$:   91-block  6
        1:   91-block  7
        1:   91-block  8
        1:   91-block  9
    %%%%%:   91-block 10
    %%%%%:   91-block 11
    %%%%%:   91-block 12
    %%%%%:   91-block 13
    %%%%%:   91-block 14
    %%%%%:   91-block 15
    %%%%%:   91-block 16
    %%%%%:   91-block 17
    %%%%%:   91-block 18
    %%%%%:   91-block 19
        1:   92:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(1152));
        1:   92-block  0
    $$$$$:   92-block  1
        1:   92-block  2
    $$$$$:   92-block  3
    $$$$$:   92-block  4
    $$$$$:   92-block  5
    $$$$$:   92-block  6
        1:   92-block  7
        1:   92-block  8
        1:   92-block  9
    %%%%%:   92-block 10
    %%%%%:   92-block 11
    %%%%%:   92-block 12
    %%%%%:   92-block 13
    %%%%%:   92-block 14
    %%%%%:   92-block 15
    %%%%%:   92-block 16
    %%%%%:   92-block 17
    %%%%%:   92-block 18
        -:   93:
        1:   94:    cache.setWaitCycles(0);
        1:   94-block  0
        1:   95:    responseData = 1152;
        1:   96:    ASSERT_TRUE(cache.Response(1152, responseData, IType::St, 20));
    $$$$$:   96-block  0
        1:   96-block  1
    $$$$$:   96-block  2
    $$$$$:   96-block  3
    $$$$$:   96-block  4
    $$$$$:   96-block  5
    $$$$$:   96-block  6
        1:   96-block  7
        1:   96-block  8
        1:   96-block  9
    %%%%%:   96-block 10
    %%%%%:   96-block 11
    %%%%%:   96-block 12
    %%%%%:   96-block 13
    %%%%%:   96-block 14
    %%%%%:   96-block 15
    %%%%%:   96-block 16
    %%%%%:   96-block 17
        1:   97:    ASSERT_FALSE(cache.getDataMemory()[0][1152 % (dataCacheBytes / blockCount) / lineSizeBytes].validityBit);
        1:   97-block  0
    $$$$$:   97-block  1
    $$$$$:   97-block  2
    $$$$$:   97-block  3
    $$$$$:   97-block  4
    $$$$$:   97-block  5
    $$$$$:   97-block  6
        1:   97-block  7
        1:   97-block  8
        1:   97-block  9
    %%%%%:   97-block 10
    %%%%%:   97-block 11
    %%%%%:   97-block 12
    %%%%%:   97-block 13
    %%%%%:   97-block 14
    %%%%%:   97-block 15
    %%%%%:   97-block 16
    %%%%%:   97-block 17
    %%%%%:   97-block 18
        1:   98:    ASSERT_EQ(cache.getDataMemory()[0][1152 % (dataCacheBytes / blockCount) / lineSizeBytes].lastUsage, 1);
        1:   98-block  0
    $$$$$:   98-block  1
        1:   98-block  2
    $$$$$:   98-block  3
    $$$$$:   98-block  4
    $$$$$:   98-block  5
    $$$$$:   98-block  6
        1:   98-block  7
        1:   98-block  8
        1:   98-block  9
    %%%%%:   98-block 10
    %%%%%:   98-block 11
    %%%%%:   98-block 12
    %%%%%:   98-block 13
    %%%%%:   98-block 14
    %%%%%:   98-block 15
    %%%%%:   98-block 16
    %%%%%:   98-block 17
        1:   99:    ASSERT_EQ(cache.getDataMemory()[0][1152 % (dataCacheBytes / blockCount) / lineSizeBytes].dataLine[ToLineOffset(1152)], 1152);
        1:   99-block  0
    $$$$$:   99-block  1
        1:   99-block  2
    $$$$$:   99-block  3
    $$$$$:   99-block  4
    $$$$$:   99-block  5
    $$$$$:   99-block  6
        1:   99-block  7
        1:   99-block  8
        1:   99-block  9
    %%%%%:   99-block 10
    %%%%%:   99-block 11
    %%%%%:   99-block 12
    %%%%%:   99-block 13
    %%%%%:   99-block 14
    %%%%%:   99-block 15
    %%%%%:   99-block 16
        -:  100:
        -:  101:    //Second code block hit.
        1:  102:    cache.Request(768);
        1:  102-block  0
    $$$$$:  102-block  1
        1:  103:    ASSERT_TRUE(cache.isCacheMiss());
        1:  103-block  0
    $$$$$:  103-block  1
    $$$$$:  103-block  2
    $$$$$:  103-block  3
    $$$$$:  103-block  4
    $$$$$:  103-block  5
        1:  103-block  6
        1:  103-block  7
        1:  103-block  8
    %%%%%:  103-block  9
    %%%%%:  103-block 10
    %%%%%:  103-block 11
    %%%%%:  103-block 12
    %%%%%:  103-block 13
    %%%%%:  103-block 14
    %%%%%:  103-block 15
    %%%%%:  103-block 16
    %%%%%:  103-block 17
        1:  104:    ASSERT_EQ(cache.getWaitCycles(), cache.getFailLatency());
        1:  104-block  0
    $$$$$:  104-block  1
        1:  104-block  2
    $$$$$:  104-block  3
    $$$$$:  104-block  4
    $$$$$:  104-block  5
    $$$$$:  104-block  6
        1:  104-block  7
        1:  104-block  8
        1:  104-block  9
    %%%%%:  104-block 10
    %%%%%:  104-block 11
    %%%%%:  104-block 12
    %%%%%:  104-block 13
    %%%%%:  104-block 14
    %%%%%:  104-block 15
    %%%%%:  104-block 16
    %%%%%:  104-block 17
    %%%%%:  104-block 18
    %%%%%:  104-block 19
        1:  105:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(768));
        1:  105-block  0
    $$$$$:  105-block  1
        1:  105-block  2
    $$$$$:  105-block  3
    $$$$$:  105-block  4
    $$$$$:  105-block  5
    $$$$$:  105-block  6
        1:  105-block  7
        1:  105-block  8
        1:  105-block  9
    %%%%%:  105-block 10
    %%%%%:  105-block 11
    %%%%%:  105-block 12
    %%%%%:  105-block 13
    %%%%%:  105-block 14
    %%%%%:  105-block 15
    %%%%%:  105-block 16
    %%%%%:  105-block 17
    %%%%%:  105-block 18
    %%%%%:  105-block 19
        1:  106:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(768));
        1:  106-block  0
    $$$$$:  106-block  1
        1:  106-block  2
    $$$$$:  106-block  3
    $$$$$:  106-block  4
    $$$$$:  106-block  5
    $$$$$:  106-block  6
        1:  106-block  7
        1:  106-block  8
        1:  106-block  9
    %%%%%:  106-block 10
    %%%%%:  106-block 11
    %%%%%:  106-block 12
    %%%%%:  106-block 13
    %%%%%:  106-block 14
    %%%%%:  106-block 15
    %%%%%:  106-block 16
    %%%%%:  106-block 17
    %%%%%:  106-block 18
    %%%%%:  106-block 19
        -:  107:
        1:  108:    cache.setWaitCycles(0);
        1:  108-block  0
        1:  109:    position = 768 % (codeCacheBytes / blockCount) / lineSizeBytes;
        1:  110:    ASSERT_EQ(cache.Response(20), 19);
    $$$$$:  110-block  0
        1:  110-block  1
        1:  110-block  2
    $$$$$:  110-block  3
    $$$$$:  110-block  4
    $$$$$:  110-block  5
    $$$$$:  110-block  6
        1:  110-block  7
        1:  110-block  8
        1:  110-block  9
    %%%%%:  110-block 10
    %%%%%:  110-block 11
    %%%%%:  110-block 12
    %%%%%:  110-block 13
    %%%%%:  110-block 14
    %%%%%:  110-block 15
    %%%%%:  110-block 16
    %%%%%:  110-block 17
    %%%%%:  110-block 18
    %%%%%:  110-block 19
        1:  111:    ASSERT_EQ(cache.getCodeMemory()[1][position].lastUsage, 1);
        1:  111-block  0
    $$$$$:  111-block  1
        1:  111-block  2
    $$$$$:  111-block  3
    $$$$$:  111-block  4
    $$$$$:  111-block  5
    $$$$$:  111-block  6
        1:  111-block  7
        1:  111-block  8
        1:  111-block  9
    %%%%%:  111-block 10
    %%%%%:  111-block 11
    %%%%%:  111-block 12
    %%%%%:  111-block 13
    %%%%%:  111-block 14
    %%%%%:  111-block 15
    %%%%%:  111-block 16
    %%%%%:  111-block 17
        1:  112:    ASSERT_EQ(cache.getCodeMemory()[1][position].address, ToLineAddr(768));
        1:  112-block  0
    $$$$$:  112-block  1
        1:  112-block  2
    $$$$$:  112-block  3
    $$$$$:  112-block  4
    $$$$$:  112-block  5
    $$$$$:  112-block  6
        1:  112-block  7
        1:  112-block  8
        1:  112-block  9
    %%%%%:  112-block 10
    %%%%%:  112-block 11
    %%%%%:  112-block 12
    %%%%%:  112-block 13
    %%%%%:  112-block 14
    %%%%%:  112-block 15
    %%%%%:  112-block 16
        1:  113:    ASSERT_TRUE(cache.getCodeMemory()[1][position].validityBit);
        1:  113-block  0
    $$$$$:  113-block  1
    $$$$$:  113-block  2
    $$$$$:  113-block  3
    $$$$$:  113-block  4
    $$$$$:  113-block  5
    $$$$$:  113-block  6
        1:  113-block  7
        1:  113-block  8
        1:  113-block  9
    %%%%%:  113-block 10
    %%%%%:  113-block 11
    %%%%%:  113-block 12
    %%%%%:  113-block 13
    %%%%%:  113-block 14
    %%%%%:  113-block 15
    %%%%%:  113-block 16
    %%%%%:  113-block 17
        -:  114:
        -:  115:    //Second data block hit.
        1:  116:    cache.Request(2048, IType::St);
        1:  116-block  0
    $$$$$:  116-block  1
        1:  117:    ASSERT_TRUE(cache.isCacheMiss());
        1:  117-block  0
    $$$$$:  117-block  1
    $$$$$:  117-block  2
    $$$$$:  117-block  3
    $$$$$:  117-block  4
    $$$$$:  117-block  5
        1:  117-block  6
        1:  117-block  7
        1:  117-block  8
    %%%%%:  117-block  9
    %%%%%:  117-block 10
    %%%%%:  117-block 11
    %%%%%:  117-block 12
    %%%%%:  117-block 13
    %%%%%:  117-block 14
    %%%%%:  117-block 15
    %%%%%:  117-block 16
    %%%%%:  117-block 17
        1:  118:    ASSERT_EQ(cache.getWaitCycles(), cache.getFailLatency());
        1:  118-block  0
    $$$$$:  118-block  1
        1:  118-block  2
    $$$$$:  118-block  3
    $$$$$:  118-block  4
    $$$$$:  118-block  5
    $$$$$:  118-block  6
        1:  118-block  7
        1:  118-block  8
        1:  118-block  9
    %%%%%:  118-block 10
    %%%%%:  118-block 11
    %%%%%:  118-block 12
    %%%%%:  118-block 13
    %%%%%:  118-block 14
    %%%%%:  118-block 15
    %%%%%:  118-block 16
    %%%%%:  118-block 17
    %%%%%:  118-block 18
    %%%%%:  118-block 19
        1:  119:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(2048));
        1:  119-block  0
    $$$$$:  119-block  1
        1:  119-block  2
    $$$$$:  119-block  3
    $$$$$:  119-block  4
    $$$$$:  119-block  5
    $$$$$:  119-block  6
        1:  119-block  7
        1:  119-block  8
        1:  119-block  9
    %%%%%:  119-block 10
    %%%%%:  119-block 11
    %%%%%:  119-block 12
    %%%%%:  119-block 13
    %%%%%:  119-block 14
    %%%%%:  119-block 15
    %%%%%:  119-block 16
    %%%%%:  119-block 17
    %%%%%:  119-block 18
    %%%%%:  119-block 19
        1:  120:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(2048));
        1:  120-block  0
    $$$$$:  120-block  1
        1:  120-block  2
    $$$$$:  120-block  3
    $$$$$:  120-block  4
    $$$$$:  120-block  5
    $$$$$:  120-block  6
        1:  120-block  7
        1:  120-block  8
        1:  120-block  9
    %%%%%:  120-block 10
    %%%%%:  120-block 11
    %%%%%:  120-block 12
    %%%%%:  120-block 13
    %%%%%:  120-block 14
    %%%%%:  120-block 15
    %%%%%:  120-block 16
    %%%%%:  120-block 17
    %%%%%:  120-block 18
        -:  121:
        1:  122:    cache.setWaitCycles(0);
        1:  122-block  0
        1:  123:    responseData = 2048;
        1:  124:    ASSERT_TRUE(cache.Response(2048, responseData, IType::St, 20));
    $$$$$:  124-block  0
        1:  124-block  1
    $$$$$:  124-block  2
    $$$$$:  124-block  3
    $$$$$:  124-block  4
    $$$$$:  124-block  5
    $$$$$:  124-block  6
        1:  124-block  7
        1:  124-block  8
        1:  124-block  9
    %%%%%:  124-block 10
    %%%%%:  124-block 11
    %%%%%:  124-block 12
    %%%%%:  124-block 13
    %%%%%:  124-block 14
    %%%%%:  124-block 15
    %%%%%:  124-block 16
    %%%%%:  124-block 17
        1:  125:    ASSERT_FALSE(cache.getDataMemory()[1][2048 % (dataCacheBytes / blockCount) / lineSizeBytes].validityBit);
        1:  125-block  0
    $$$$$:  125-block  1
    $$$$$:  125-block  2
    $$$$$:  125-block  3
    $$$$$:  125-block  4
    $$$$$:  125-block  5
    $$$$$:  125-block  6
        1:  125-block  7
        1:  125-block  8
        1:  125-block  9
    %%%%%:  125-block 10
    %%%%%:  125-block 11
    %%%%%:  125-block 12
    %%%%%:  125-block 13
    %%%%%:  125-block 14
    %%%%%:  125-block 15
    %%%%%:  125-block 16
    %%%%%:  125-block 17
    %%%%%:  125-block 18
        1:  126:    ASSERT_EQ(cache.getDataMemory()[1][2048 % (dataCacheBytes / blockCount) / lineSizeBytes].lastUsage, 1);
        1:  126-block  0
    $$$$$:  126-block  1
        1:  126-block  2
    $$$$$:  126-block  3
    $$$$$:  126-block  4
    $$$$$:  126-block  5
    $$$$$:  126-block  6
        1:  126-block  7
        1:  126-block  8
        1:  126-block  9
    %%%%%:  126-block 10
    %%%%%:  126-block 11
    %%%%%:  126-block 12
    %%%%%:  126-block 13
    %%%%%:  126-block 14
    %%%%%:  126-block 15
    %%%%%:  126-block 16
    %%%%%:  126-block 17
        1:  127:    ASSERT_EQ(cache.getDataMemory()[1][2048 % (dataCacheBytes / blockCount) / lineSizeBytes].dataLine[ToLineOffset(2048)], 2048);
        1:  127-block  0
    $$$$$:  127-block  1
        1:  127-block  2
    $$$$$:  127-block  3
    $$$$$:  127-block  4
    $$$$$:  127-block  5
    $$$$$:  127-block  6
        1:  127-block  7
        1:  127-block  8
        1:  127-block  9
    %%%%%:  127-block 10
    %%%%%:  127-block 11
    %%%%%:  127-block 12
    %%%%%:  127-block 13
    %%%%%:  127-block 14
    %%%%%:  127-block 15
    %%%%%:  127-block 16
    %%%%%:  127-block 17
        -:  128:
        -:  129:    //Fill code cache
        5:  130:    for (int i = 0; i < blockCount; i++) {
        1:  130-block  0
    $$$$$:  130-block  1
        5:  130-block  2
        4:  130-block  3
        4:  131:        cache.Request(512 + i * 128 * 2);
        4:  131-block  0
        4:  132:        cache.setWaitCycles(0);
        4:  132-block  0
        4:  133:        cache.Response(20);
        -:  134:    }
        -:  135:
        1:  136:    ASSERT_EQ(cache.getCodeMemory()[blockCount - 1][0].lastUsage, 1);
        1:  136-block  0
        1:  136-block  1
    $$$$$:  136-block  2
    $$$$$:  136-block  3
    $$$$$:  136-block  4
    $$$$$:  136-block  5
        1:  136-block  6
        1:  136-block  7
        1:  136-block  8
    %%%%%:  136-block  9
    %%%%%:  136-block 10
    %%%%%:  136-block 11
    %%%%%:  136-block 12
    %%%%%:  136-block 13
    %%%%%:  136-block 14
    %%%%%:  136-block 15
    %%%%%:  136-block 16
        1:  137:    ASSERT_EQ(cache.getCodeMemory()[blockCount - 1][0].address, ToLineAddr(1280));
        1:  137-block  0
    $$$$$:  137-block  1
        1:  137-block  2
    $$$$$:  137-block  3
    $$$$$:  137-block  4
    $$$$$:  137-block  5
    $$$$$:  137-block  6
        1:  137-block  7
        1:  137-block  8
        1:  137-block  9
    %%%%%:  137-block 10
    %%%%%:  137-block 11
    %%%%%:  137-block 12
    %%%%%:  137-block 13
    %%%%%:  137-block 14
    %%%%%:  137-block 15
    %%%%%:  137-block 16
        1:  138:    ASSERT_TRUE(cache.getCodeMemory()[blockCount - 1][0].validityBit);
        1:  138-block  0
    $$$$$:  138-block  1
    $$$$$:  138-block  2
    $$$$$:  138-block  3
    $$$$$:  138-block  4
    $$$$$:  138-block  5
    $$$$$:  138-block  6
        1:  138-block  7
        1:  138-block  8
        1:  138-block  9
    %%%%%:  138-block 10
    %%%%%:  138-block 11
    %%%%%:  138-block 12
    %%%%%:  138-block 13
    %%%%%:  138-block 14
    %%%%%:  138-block 15
    %%%%%:  138-block 16
    %%%%%:  138-block 17
        -:  139:
        -:  140:    //Add line to full cache
        1:  141:    cache.Request(1536);
        1:  141-block  0
    $$$$$:  141-block  1
        1:  142:    ASSERT_TRUE(cache.isCacheMiss());
        1:  142-block  0
    $$$$$:  142-block  1
    $$$$$:  142-block  2
    $$$$$:  142-block  3
    $$$$$:  142-block  4
    $$$$$:  142-block  5
        1:  142-block  6
        1:  142-block  7
        1:  142-block  8
    %%%%%:  142-block  9
    %%%%%:  142-block 10
    %%%%%:  142-block 11
    %%%%%:  142-block 12
    %%%%%:  142-block 13
    %%%%%:  142-block 14
    %%%%%:  142-block 15
    %%%%%:  142-block 16
    %%%%%:  142-block 17
        1:  143:    ASSERT_EQ(cache.getWaitCycles(), cache.getFailLatency());
        1:  143-block  0
    $$$$$:  143-block  1
        1:  143-block  2
    $$$$$:  143-block  3
    $$$$$:  143-block  4
    $$$$$:  143-block  5
    $$$$$:  143-block  6
        1:  143-block  7
        1:  143-block  8
        1:  143-block  9
    %%%%%:  143-block 10
    %%%%%:  143-block 11
    %%%%%:  143-block 12
    %%%%%:  143-block 13
    %%%%%:  143-block 14
    %%%%%:  143-block 15
    %%%%%:  143-block 16
    %%%%%:  143-block 17
    %%%%%:  143-block 18
    %%%%%:  143-block 19
        1:  144:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(1536));
        1:  144-block  0
    $$$$$:  144-block  1
        1:  144-block  2
    $$$$$:  144-block  3
    $$$$$:  144-block  4
    $$$$$:  144-block  5
    $$$$$:  144-block  6
        1:  144-block  7
        1:  144-block  8
        1:  144-block  9
    %%%%%:  144-block 10
    %%%%%:  144-block 11
    %%%%%:  144-block 12
    %%%%%:  144-block 13
    %%%%%:  144-block 14
    %%%%%:  144-block 15
    %%%%%:  144-block 16
    %%%%%:  144-block 17
    %%%%%:  144-block 18
    %%%%%:  144-block 19
        1:  145:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(1536));
        1:  145-block  0
    $$$$$:  145-block  1
        1:  145-block  2
    $$$$$:  145-block  3
    $$$$$:  145-block  4
    $$$$$:  145-block  5
    $$$$$:  145-block  6
        1:  145-block  7
        1:  145-block  8
        1:  145-block  9
    %%%%%:  145-block 10
    %%%%%:  145-block 11
    %%%%%:  145-block 12
    %%%%%:  145-block 13
    %%%%%:  145-block 14
    %%%%%:  145-block 15
    %%%%%:  145-block 16
    %%%%%:  145-block 17
    %%%%%:  145-block 18
    %%%%%:  145-block 19
        -:  146:
        1:  147:    cache.setWaitCycles(0);
        1:  147-block  0
        1:  148:    position = 1536 % (codeCacheBytes / blockCount) / lineSizeBytes;
        1:  149:    ASSERT_EQ(cache.Response(20), 0);
    $$$$$:  149-block  0
        1:  149-block  1
        1:  149-block  2
    $$$$$:  149-block  3
    $$$$$:  149-block  4
    $$$$$:  149-block  5
    $$$$$:  149-block  6
        1:  149-block  7
        1:  149-block  8
        1:  149-block  9
    %%%%%:  149-block 10
    %%%%%:  149-block 11
    %%%%%:  149-block 12
    %%%%%:  149-block 13
    %%%%%:  149-block 14
    %%%%%:  149-block 15
    %%%%%:  149-block 16
    %%%%%:  149-block 17
    %%%%%:  149-block 18
    %%%%%:  149-block 19
        1:  150:    ASSERT_EQ(cache.getCodeMemory()[0][position].lastUsage, 1);
        1:  150-block  0
    $$$$$:  150-block  1
        1:  150-block  2
    $$$$$:  150-block  3
    $$$$$:  150-block  4
    $$$$$:  150-block  5
    $$$$$:  150-block  6
        1:  150-block  7
        1:  150-block  8
        1:  150-block  9
    %%%%%:  150-block 10
    %%%%%:  150-block 11
    %%%%%:  150-block 12
    %%%%%:  150-block 13
    %%%%%:  150-block 14
    %%%%%:  150-block 15
    %%%%%:  150-block 16
    %%%%%:  150-block 17
        1:  151:    ASSERT_EQ(cache.getCodeMemory()[0][position].address, ToLineAddr(1536));
        1:  151-block  0
    $$$$$:  151-block  1
        1:  151-block  2
    $$$$$:  151-block  3
    $$$$$:  151-block  4
    $$$$$:  151-block  5
    $$$$$:  151-block  6
        1:  151-block  7
        1:  151-block  8
        1:  151-block  9
    %%%%%:  151-block 10
    %%%%%:  151-block 11
    %%%%%:  151-block 12
    %%%%%:  151-block 13
    %%%%%:  151-block 14
    %%%%%:  151-block 15
    %%%%%:  151-block 16
        1:  152:    ASSERT_TRUE(cache.getCodeMemory()[0][position].validityBit);
        1:  152-block  0
    $$$$$:  152-block  1
    $$$$$:  152-block  2
    $$$$$:  152-block  3
    $$$$$:  152-block  4
    $$$$$:  152-block  5
    $$$$$:  152-block  6
        1:  152-block  7
        1:  152-block  8
        1:  152-block  9
    %%%%%:  152-block 10
    %%%%%:  152-block 11
    %%%%%:  152-block 12
    %%%%%:  152-block 13
    %%%%%:  152-block 14
    %%%%%:  152-block 15
    %%%%%:  152-block 16
    %%%%%:  152-block 17
        -:  153:
        -:  154:
        -:  155:    //Fill code cache
        5:  156:    for (int i = 0; i < blockCount; i++) {
        1:  156-block  0
    $$$$$:  156-block  1
        5:  156-block  2
        4:  156-block  3
        4:  157:        cache.Request(1024 + i * dataCacheBytes / blockCount, IType::St);
        4:  157-block  0
        4:  158:        cache.setWaitCycles(0);
        4:  158-block  0
        4:  159:        cache.Response(1024 + i * dataCacheBytes / blockCount, responseData, IType::St, 20);
        -:  160:    }
        -:  161:
        1:  162:    ASSERT_FALSE(cache.getDataMemory()[blockCount - 1][4096 % (dataCacheBytes / blockCount) / lineSizeBytes].validityBit);
        1:  162-block  0
    $$$$$:  162-block  1
    $$$$$:  162-block  2
    $$$$$:  162-block  3
    $$$$$:  162-block  4
    $$$$$:  162-block  5
        1:  162-block  6
        1:  162-block  7
        1:  162-block  8
    %%%%%:  162-block  9
    %%%%%:  162-block 10
    %%%%%:  162-block 11
    %%%%%:  162-block 12
    %%%%%:  162-block 13
    %%%%%:  162-block 14
    %%%%%:  162-block 15
    %%%%%:  162-block 16
    %%%%%:  162-block 17
        1:  163:    ASSERT_EQ(cache.getDataMemory()[blockCount - 1][4096 % (dataCacheBytes / blockCount) / lineSizeBytes].lastUsage, 1);
        1:  163-block  0
    $$$$$:  163-block  1
        1:  163-block  2
    $$$$$:  163-block  3
    $$$$$:  163-block  4
    $$$$$:  163-block  5
    $$$$$:  163-block  6
        1:  163-block  7
        1:  163-block  8
        1:  163-block  9
    %%%%%:  163-block 10
    %%%%%:  163-block 11
    %%%%%:  163-block 12
    %%%%%:  163-block 13
    %%%%%:  163-block 14
    %%%%%:  163-block 15
    %%%%%:  163-block 16
    %%%%%:  163-block 17
        1:  164:    ASSERT_EQ(cache.getDataMemory()[blockCount - 1][4096 % (dataCacheBytes / blockCount) / lineSizeBytes].dataLine[ToLineOffset(4096)], 2048);
        1:  164-block  0
    $$$$$:  164-block  1
        1:  164-block  2
    $$$$$:  164-block  3
    $$$$$:  164-block  4
    $$$$$:  164-block  5
    $$$$$:  164-block  6
        1:  164-block  7
        1:  164-block  8
        1:  164-block  9
    %%%%%:  164-block 10
    %%%%%:  164-block 11
    %%%%%:  164-block 12
    %%%%%:  164-block 13
    %%%%%:  164-block 14
    %%%%%:  164-block 15
    %%%%%:  164-block 16
        -:  165:
        -:  166:    //Full data cache request / response
        1:  167:    cache.Request(5120, IType::St);
        1:  167-block  0
    $$$$$:  167-block  1
        1:  168:    ASSERT_TRUE(cache.isCacheMiss());
        1:  168-block  0
    $$$$$:  168-block  1
    $$$$$:  168-block  2
    $$$$$:  168-block  3
    $$$$$:  168-block  4
    $$$$$:  168-block  5
        1:  168-block  6
        1:  168-block  7
        1:  168-block  8
    %%%%%:  168-block  9
    %%%%%:  168-block 10
    %%%%%:  168-block 11
    %%%%%:  168-block 12
    %%%%%:  168-block 13
    %%%%%:  168-block 14
    %%%%%:  168-block 15
    %%%%%:  168-block 16
    %%%%%:  168-block 17
        1:  169:    ASSERT_EQ(cache.getWaitCycles(), cache.getFailLatency() + 120);
        1:  169-block  0
    $$$$$:  169-block  1
        1:  169-block  2
    $$$$$:  169-block  3
    $$$$$:  169-block  4
    $$$$$:  169-block  5
    $$$$$:  169-block  6
        1:  169-block  7
        1:  169-block  8
        1:  169-block  9
    %%%%%:  169-block 10
    %%%%%:  169-block 11
    %%%%%:  169-block 12
    %%%%%:  169-block 13
    %%%%%:  169-block 14
    %%%%%:  169-block 15
    %%%%%:  169-block 16
    %%%%%:  169-block 17
    %%%%%:  169-block 18
    %%%%%:  169-block 19
        1:  170:    ASSERT_EQ(cache.getRequestedIp(), ToLineAddr(5120));
        1:  170-block  0
    $$$$$:  170-block  1
        1:  170-block  2
    $$$$$:  170-block  3
    $$$$$:  170-block  4
    $$$$$:  170-block  5
    $$$$$:  170-block  6
        1:  170-block  7
        1:  170-block  8
        1:  170-block  9
    %%%%%:  170-block 10
    %%%%%:  170-block 11
    %%%%%:  170-block 12
    %%%%%:  170-block 13
    %%%%%:  170-block 14
    %%%%%:  170-block 15
    %%%%%:  170-block 16
    %%%%%:  170-block 17
    %%%%%:  170-block 18
    %%%%%:  170-block 19
        1:  171:    ASSERT_EQ(cache.getRequestedOffset(), ToLineOffset(5120));
        1:  171-block  0
    $$$$$:  171-block  1
        1:  171-block  2
    $$$$$:  171-block  3
    $$$$$:  171-block  4
    $$$$$:  171-block  5
    $$$$$:  171-block  6
        1:  171-block  7
        1:  171-block  8
        1:  171-block  9
    %%%%%:  171-block 10
    %%%%%:  171-block 11
    %%%%%:  171-block 12
    %%%%%:  171-block 13
    %%%%%:  171-block 14
    %%%%%:  171-block 15
    %%%%%:  171-block 16
    %%%%%:  171-block 17
    %%%%%:  171-block 18
        -:  172:
        1:  173:    cache.setWaitCycles(0);
        1:  173-block  0
        1:  174:    responseData = 1111;
        1:  175:    ASSERT_TRUE(cache.Response(5120, responseData, IType::St, 20));
    $$$$$:  175-block  0
        1:  175-block  1
    $$$$$:  175-block  2
    $$$$$:  175-block  3
    $$$$$:  175-block  4
    $$$$$:  175-block  5
    $$$$$:  175-block  6
        1:  175-block  7
        1:  175-block  8
        1:  175-block  9
    %%%%%:  175-block 10
    %%%%%:  175-block 11
    %%%%%:  175-block 12
    %%%%%:  175-block 13
    %%%%%:  175-block 14
    %%%%%:  175-block 15
    %%%%%:  175-block 16
    %%%%%:  175-block 17
        1:  176:    ASSERT_FALSE(cache.getDataMemory()[0][5120 % (dataCacheBytes / blockCount) / lineSizeBytes].validityBit);
        1:  176-block  0
    $$$$$:  176-block  1
    $$$$$:  176-block  2
    $$$$$:  176-block  3
    $$$$$:  176-block  4
    $$$$$:  176-block  5
    $$$$$:  176-block  6
        1:  176-block  7
        1:  176-block  8
        1:  176-block  9
    %%%%%:  176-block 10
    %%%%%:  176-block 11
    %%%%%:  176-block 12
    %%%%%:  176-block 13
    %%%%%:  176-block 14
    %%%%%:  176-block 15
    %%%%%:  176-block 16
    %%%%%:  176-block 17
    %%%%%:  176-block 18
        1:  177:    ASSERT_EQ(cache.getDataMemory()[0][5120 % (dataCacheBytes / blockCount) / lineSizeBytes].lastUsage, 1);
        1:  177-block  0
    $$$$$:  177-block  1
        1:  177-block  2
    $$$$$:  177-block  3
    $$$$$:  177-block  4
    $$$$$:  177-block  5
    $$$$$:  177-block  6
        1:  177-block  7
        1:  177-block  8
        1:  177-block  9
    %%%%%:  177-block 10
    %%%%%:  177-block 11
    %%%%%:  177-block 12
    %%%%%:  177-block 13
    %%%%%:  177-block 14
    %%%%%:  177-block 15
    %%%%%:  177-block 16
    %%%%%:  177-block 17
        1:  178:    ASSERT_EQ(cache.getDataMemory()[0][5120 % (dataCacheBytes / blockCount) / lineSizeBytes].dataLine[ToLineOffset(5120)], 1111);
        1:  178-block  0
    $$$$$:  178-block  1
        1:  178-block  2
    $$$$$:  178-block  3
    $$$$$:  178-block  4
    $$$$$:  178-block  5
    $$$$$:  178-block  6
        1:  178-block  7
        1:  178-block  8
        1:  178-block  9
        1:  178-block 10
    $$$$$:  178-block 11
        1:  178-block 12
    %%%%%:  178-block 13
    %%%%%:  178-block 14
    %%%%%:  178-block 15
    %%%%%:  178-block 16
    %%%%%:  178-block 17
    %%%%%:  178-block 18
    %%%%%:  178-block 19
        -:  179:
        4:  180:}
        1:  180-block  0
        1:  180-block  1
        1:  180-block  2
        1:  180-block  3
        1:  180-block  4
        1:  180-block  5
        -:  181:
